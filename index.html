<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kalkulator Order Es Krim</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: Arial, sans-serif; padding: 10px; }
  table { border-collapse: collapse; width: 100%; font-size: 14px; }
  th, td { border: 1px solid #999; padding: 6px; text-align: center; }
  th { background-color: #f2f2f2; }
  input[type=number] { width: 70px; padding: 4px; }
  button { padding: 8px 12px; margin-top: 10px; background: red; color: white; border: none; cursor: pointer; }
  button:hover { background: darkred; }
  h3 { margin-top: 15px; }
</style>
</head>
<body>

<h2>Kalkulator Order Es Krim</h2>
<table id="orderTable">
  <thead>
    <tr>
      <th>No</th>
      <th>Nama Produk</th>
      <th>Harga/Karton (Rp)</th>
      <th>Karton</th>
      <th>Total (Rp)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h3>Total Keseluruhan: Rp <span id="grandTotal">0</span></h3>
<button onclick="resetData()">Reset Data</button>

<script>
const defaultProducts = [
  { name: "Ice Watermelon", price: 77500, qty: 0 },
  { name: "Ice Pineapple", price: 77500, qty: 0 },
  { name: "MM Choco Crispy", price: 77900, qty: 0 },
  { name: "MM Strawberry Crispy", price: 77900, qty: 0 },
  { name: "Apple Banana Milk", price: 62400, qty: 0 },
  { name: "Chocolate Stick", price: 77600, qty: 0 },
  { name: "Milk Puding", price: 77600, qty: 0 },
  { name: "Milk Melon", price: 76600, qty: 0 },
  { name: "Sweet Corn", price: 96000, qty: 0 },
  { name: "Malt Choco", price: 82000, qty: 0 },
  { name: "Crunchocho", price: 96000, qty: 0 },
  { name: "Coffee Crispy", price: 0, qty: 0 },
  { name: "Black Sugar - Boba", price: 128000, qty: 0 },
  { name: "Chocolate Crispy", price: 117000, qty: 0 },
  { name: "Rain Bow Milk Cup", price: 0, qty: 0 },
  { name: "Chocolate Sundae Cup", price: 97200, qty: 0 },
  { name: "Strawberry Sundae Cup", price: 97800, qty: 0 },
  { name: "Chocolate Cone", price: 97200, qty: 0 },
  { name: "Strawberry Cone", price: 0, qty: 0 }
];

let products = JSON.parse(localStorage.getItem("orderData")) || defaultProducts;
const tbody = document.querySelector("#orderTable tbody");

function renderTable() {
  tbody.innerHTML = "";
  products.forEach((product, index) => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${index + 1}</td>
      <td>${product.name}</td>
      <td><input type="number" min="0" value="${product.price}" onchange="updatePrice(${index}, this.value)"></td>
      <td><input type="number" min="0" value="${product.qty}" onchange="updateQty(${index}, this.value)"></td>
      <td class="total">${(product.qty * product.price).toLocaleString('id-ID')}</td>
    `;
    tbody.appendChild(row);
  });
  updateGrandTotal();
}

function updateQty(index, value) {
  products[index].qty = parseInt(value) || 0;
  saveData();
  renderTable();
}

function updatePrice(index, value) {
  products[index].price = parseInt(value) || 0;
  saveData();
  renderTable();
}

function updateGrandTotal() {
  let total = products.reduce((sum, p) => sum + (p.price * p.qty), 0);
  document.getElementById("grandTotal").textContent = total.toLocaleString('id-ID');
}

function saveData() {
  localStorage.setItem("orderData", JSON.stringify(products));
}

function resetData() {
  if (confirm("Yakin mau reset semua data?")) {
    products = defaultProducts.map(p => ({...p}));
    saveData();
    renderTable();
  }
}

renderTable();
</script>

</body>
</html>

